//circle subdivision steps (increase to make it rounder)
$fn = 80;

// error tolerance of printer
eps = 0.3;

// head radius
r = 145/2;

//strength
s = 2;
//glas strength
gs = 1;


//height
h = 10;

//length of holder
l = 55;

//screw hole radius
shr = (3.3 /3) + eps;

nose_holder_w = 8;
//nose offset
nose_offset_y = 20;
//nose offset z
nose_offset_z = 32;


//133 mm von ohr hinterseite zum nasenr√ºcken
    //146 mm dia
    // vom boden zur nasenauflageflaeche ca 32mm 



module henkel() {
    linear_extrude(s)polygon([[0.0,0.0],[14.209302526528887,0.16610257338988768],[19.10632686036608,3.176302983235312],[26.335857481943787,10.823839159599359],[30.409059506765075,21.23750544230785],[31.822211229662255,35.312226277531046],[33.56786924029995,40.51905941888529],[35.978539826418675,44.34282750706731],[34.06662867191072,47.67845498824738],[29.744046931284046,47.922525291748364],[24.756452615176347,45.96996286374051],[21.26513659390096,42.06483800772483],[19.436352011328136,34.091874760026144],[18.189453432301207,25.712127673159156],[16.526921993598645,18.959515942965368],[12.952479400388123,14.240823408613082],[7.382999080734524,10.254341784763739],[3.8916830594591345,10.17298501693008],[0.0,10],]);
    
    }

module nose_holder() {
    linear_extrude(s*2) polygon([[0.0,0.00],[4.0,-0.0],[3.966761863849762,0.9845389740701697],[4.120341338815951,2.8748545426894165],[4.465895157489876,4.462719620329581],[5.0418181886130835,6.164003632086904],[5.886505300927122,7.978706577961381],[5.617741219736292,8.81044542815385],[4.96502845112999,8.999476985015773],[4.005156732591309,8.50799493717477],[3.3524439639850026,7.714062398354686],[2.9301004078279833,6.542066745810753],[2.315782507963228,4.538332243074351],[2.0086235580308505,3.026079788178956],[1.7398594768400157,1.8540841356350222],[1.0871467082337132,1.1357642195597093],[0.3576442021443164,0.9845389740701697],[0.05048525221193883,0.9467326626977848],[-0.5638326476528207,0.9845389740701697],[-1.0245710725513872,1.173570530932094],[-1.754073578640784,1.929696758379792],[-2.061232528573166,2.988273476806571],[-2.406786347247091,4.538332243074351],[-2.982709378370299,6.617679368555523],[-3.2898683283026764,7.638449775609917],[-3.9809759656505284,8.50799493717477],[-4.979242552930757,8.96167067364339],[-5.708745059020156,8.772639116781464],[-5.8239296652447985,7.940900266588996],[-5.0944271591554,6.315228877576444],[-4.5568989967737386,4.387106997584812],[-4.364924653066,2.912660854061801],[-4.057765703133622,0.9467326626977848],[-4,0.00],]);

    }

module nose_holder_end() {
linear_extrude(nose_offset_y)polygon([[0.0,0.0],[4.0,0.0],[5.241386689106601,4.103092328994516],[6.438409324972452,6.055654757002359],[-5.997325836522748,6.055654757002359],[-4.9333057157531055,3.972921500460662],[-4,0.00],]);

}

module half_cylinder(r) {
    difference() {
        cylinder(h,r,r);
    cylinder(h,r-s,r-s);
    translate([-r,0,0]) cube([r*2,r,h]);

    for(angle = [-80,-20,20,80]) {
    rotate([0,0,angle]) translate([0,-r+s*5,h/2]) rotate([90,0,0])cylinder(s*10,shr,shr);
    }
}

    }

print_main_part = true;
print_holder_inner = false;
print_holder_outer = false;



if(print_holder_inner) {
    half_cylinder(r);
}
if(print_holder_outer) {
    half_cylinder(r+s+gs);
}
if(print_main_part) {
    half_cylinder(r);

    translate([-4,-r+s,0])cube([8,nose_offset_y,h]);
    translate([-4,-r+s+nose_offset_y-2*s,0])cube([8,2*s,nose_offset_z]);
    translate([0,-r+s+nose_offset_y,nose_offset_z])rotate([90,0,0])nose_holder();


    translate([-r,0,0]) cube([s,l,h]);
    translate([-r,l,0]) rotate([0,90,0])rotate([0,0,90])henkel();

    translate([r-s,0,0]) cube([s,l,h]);
    translate([r-s,l,0]) rotate([0,90,0])rotate([0,0,90])henkel();

}

